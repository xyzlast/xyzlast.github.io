<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>15. Spring View | Programming is Fun | Still waters run deep. When the well&#39;s dry, we know the worth of water.</title>

  
  <meta name="author" content="ykyoon">
  

  
  <meta name="description" content="15. Spring ViewView는 사용자에게 최종적으로 보이는 영역입니다. 이 영역은 우리가 일반적으로 보는 Html이 될 수도 있고, Mobile App에게는 JSON format의 API 결과가 될 수도 있습니다.기본적으로 Spring Servlet/MVC를 기">
  

  
  
  <meta name="keywords" content="spring, view, controller, pdf, json">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="15. Spring View"/>

  <meta property="og:site_name" content="Programming is Fun"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Programming is Fun" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Programming is Fun</a>
    </h1>
    <p class="site-description">Still waters run deep. When the well&#39;s dry, we know the worth of water.</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>15. Spring View</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/04/10/spring-view/" rel="bookmark">
        <time class="entry-date published" datetime="2018-04-09T23:17:00.000Z">
          2018-04-10
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h1 id="15-Spring-View"><a href="#15-Spring-View" class="headerlink" title="15. Spring View"></a>15. Spring View</h1><p>View는 사용자에게 최종적으로 보이는 영역입니다. 이 영역은 우리가 일반적으로 보는 Html이 될 수도 있고, Mobile App에게는 JSON format의 API 결과가 될 수도 있습니다.<br>기본적으로 Spring Servlet/MVC를 기반으로 동작하게 됩니다. View 계층 또는 Presentation 계층이라고 합니다.</p>
<p>Controller가 return한 결과에 대한 표현을 담당하는 영역으로 Controller가 넘겨주는 ModelAndView가 View에서 핵심 객체라고 할 수 있습니다.</p>
<p>기본적인 동작은 DispatcherServlet이 ModelAndView에서 넘어온 값 ViewResolver를 통해서 해석한 결과를 사용자에게 보내줍니다. ViewResolver는 기본적으로 jsp를 기반으로 하고 있고, jsp 이외에 모든 web context가 될 수 있습니다.</p>
<h2 id="View의-구조"><a href="#View의-구조" class="headerlink" title="View의 구조"></a>View의 구조</h2><h3 id="View의-기본-구조"><a href="#View의-기본-구조" class="headerlink" title="View의 기본 구조"></a>View의 기본 구조</h3><p>기본적으로 Spring의 org.springframework.web.servlet.View interface를 구현한 객체를 View로 표현이 가능합니다. 일반적으로 View는 Spring 내부의 View를 확장하거나, pdf, rss, excel과 같은 다른 형태의 View를 표현하기 위해서 class를 확장해서 사용합니다. 또는 외부 View engine을 이용한 View의 표현 역시 가능합니다. 여기서 외부 View engine을 이용하는 것은 <code>velocity</code>, <code>freemarker</code>, <code>tiles</code>와 같은 외부의 View engine과의 연결 interface 및 설정을 구현함으로서 가능합니다.</p>
<h3 id="View의-기본-동작"><a href="#View의-기본-동작" class="headerlink" title="View의 기본 동작"></a>View의 기본 동작</h3><p>Controller가 작업을 마친 후, View정보를 ModelAndView 객체에 담아서 보내주는 DispatcherServlet에 보내주는 것이 기본 동작입니다. 이에 대한 방법은 Spring @MVC는 두가지를 제공하고 있습니다. 첫번째는 View interface를 구현한 객체를 보내주는 방법이고, 다른 하나는 View의 이름만을 보내는 방법입니다. 첫번째 방법의 경우에는 View interface의 구현 방법에 따라 다양한 View를 표시하게 됩니다. DispatcherServlet과 Controller간에는 어떠한 동작도 존재하지 않습니다. 그렇지만 View의 이름만 보내주는 방식은 좀 다르게 동작하게 됩니다.</p>
<p>View의 이름으로 표현되는 논리적인 View를 실질적인 View interface를 구현한 객체로 변경하는 작업이 필요하게되는데요. 이를 담당하는 객체를 ViewResolver라고 합니다.</p>
<p>Spring에서 제공하는 주요 ViewResolver는 다음과 같습니다.</p>
<table>
<thead>
<tr>
<th>ViewResolver 구현 class</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>InternalResourceViewResolver</td>
<td>View Name에서 jsp나 tiles 연동을 위한 View 객체를 반환</td>
</tr>
<tr>
<td>BeanNameViewResolver</td>
<td>Bean name을 기준으로 View 객체를 반환</td>
</tr>
<tr>
<td>ResourceBundlleViewResolver</td>
<td>View 이름과 View 객체간의 mapping 정보를 저장하기 위해서 Resource 파일을 이용</td>
</tr>
<tr>
<td>XmlViewResolver</td>
<td>View 이름과 View 객체간의 mapping 정보를 저장하기 위해서 xml 파일을 이용</td>
</tr>
</tbody>
</table>
<p>기본적으로 만들어지는 ViewResolver의 interface는 다음과 같습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ViewResolver</span> </span>&#123;</span><br><span class="line">    <span class="function">View <span class="title">resolveViewName</span><span class="params">(String viewName, Locale locale)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>다국어 지원을 위한 locale 정보와 View 이름을 이용한 View 객체를 얻어내는 간단한 interface만을 가지고 있습니다. 이를 이용해서 새로운 ViewResolver를 만드는 것 역시 가능합니다.<br>구성되는 View는 다음과 같은 interface를 가지고 있습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">getContentType</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">render</span><span class="params">(Map&lt;String, ?&gt; model, HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>들어오게되는 model을 어떻게 render하는지에 대한 interface 선언을 볼 수 있습니다.</p>
<h2 id="View의-표현법-HTML"><a href="#View의-표현법-HTML" class="headerlink" title="View의 표현법 - HTML"></a>View의 표현법 - HTML</h2><p>우리가 일반적으로 보는 브라우져를 이용해서 볼 수 있는 화면을 표시하는 방법입니다.</p>
<h3 id="JSP-amp-JSTL-JSP-Standard-Tag-Library"><a href="#JSP-amp-JSTL-JSP-Standard-Tag-Library" class="headerlink" title="JSP &amp; JSTL(JSP Standard Tag Library)"></a>JSP &amp; JSTL(JSP Standard Tag Library)</h3><p>기본적인 jsp view와 JSTL을 사용하기 위한 View입니다.</p>
<p>jsp와 jstl을 사용하기 위해서는 특별한 View 설정은 필요없지만, 기본적으로 Spring에서 요구되는 View는 WEB-INF 폴더 안에 view file들을 위치시키고, client에서 직접 접근할 수 없도록 하는 것이 일반적입니다. 이때는 기본적으로 <code>InternalResourceViewResolver</code>를 사용해서 View 파일의 위치를 설정하도록 합니다.</p>
<p><em>build.gradle</em></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">group:</span> <span class="string">'javax.servlet.jsp.jstl'</span>, <span class="string">name:</span> <span class="string">'jstl'</span>, <span class="string">version:</span> <span class="string">'1.2'</span></span><br></pre></td></tr></table></figure>
<p><em>applicationContext.xml</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewClass"</span> <span class="attr">value</span>=<span class="string">"org.springframework.web.servlet.view.JstlView"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/views/"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"contentType"</span> <span class="attr">value</span>=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"order"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><em>@Configuration</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ViewResolver <span class="title">viewResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    InternalResourceViewResolver internalResourceViewResolver = <span class="keyword">new</span> InternalResourceViewResolver();</span><br><span class="line">    internalResourceViewResolver.setPrefix(<span class="string">"/WEB-INF/jsp/"</span>);</span><br><span class="line">    internalResourceViewResolver.setSuffix(<span class="string">".jsp"</span>);</span><br><span class="line">    internalResourceViewResolver.setOrder(<span class="number">1</span>);</span><br><span class="line">    internalResourceViewResolver.setViewClass(JstlView.class);</span><br><span class="line">    <span class="keyword">return</span> internalResourceViewResolver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JSTL은 다양한 tag를 지원하고 있습니다. 이는 기존 jsp에서 &lt;%= %&gt;에서 빈번하게 만들어지는 code들을 단순화하고 읽기 편한 간단한 언어로 만들기 위해서 제공되고 있습니다.  jsp는 다음과 같은 tag를 선언함으로서 사용할 수 있습니다.</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">"c"</span>uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span>%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>c:out</code>  - 객체를 출력한다.</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:out value=<span class="string">"$&#123;name&#125;"</span>/&gt;&lt;!--기본 문법--&gt;</span><br><span class="line">&lt;c:out value=<span class="string">"$&#123;age&#125;"</span> <span class="keyword">default</span>=<span class="string">"Null or empty"</span>/&gt; &lt;!--  <span class="keyword">default</span> 속성 : 값이 없을때 기본출력값을 정의--&gt;</span><br><span class="line">&lt;c:out value=<span class="string">"$&#123;name&#125;"</span> escapeXml=<span class="string">"false"</span>/&gt;&lt;!-- escapeXml 속성 : 기본적으로 XML 문자를 escape하는데 Escape 하지 않으려면  <span class="keyword">false</span>로 설정--&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>c:if</code> - 조건문</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--기본문법--&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">"$&#123;조건&#125;"</span>&gt;</span><br><span class="line">    조건 만족시 이 영역을 수행</span><br><span class="line">&lt;/c:if&gt;</span><br></pre></td></tr></table></figure>
<p>jstl에서 if문은 조금 문제가 있습니다. 그건 else가 존재하지 않는 문제인데요. 우리가 주로 사용하는 if~else 문을 갖추기 위해서는 아래의 choose문을 사용해야지 됩니다.</p>
<ul>
<li><code>c:choose, c:when, c:otherwise</code> - switch 문</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--기본문법--&gt;</span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">"$&#123;value == 1&#125;"</span>&gt;</span><br><span class="line">        value가 <span class="number">1</span>이면 이 영역을 수행</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:when test=<span class="string">"$&#123;value == 2&#125;"</span>&gt;</span><br><span class="line">        value가 <span class="number">2</span>이면 이 영역을 수행</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:otherwise&gt;</span><br><span class="line">        value가 <span class="number">1</span>,<span class="number">2</span>가 아니면 이 영역을 수행(기본값)</span><br><span class="line">    &lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>c:foreach</code> - 반복문</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--기본문법(<span class="number">0</span>~<span class="number">9</span>까지 출력)--&gt;</span><br><span class="line">&lt;c:forEach begin=<span class="string">"0"</span> end=<span class="string">"9"</span> var=<span class="string">"i"</span>&gt;</span><br><span class="line">    &lt;c:out value=<span class="string">"$&#123;i&#125;"</span>/&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;!-- step 속성 : 정의된 수만큼 증가를 시킨다.(<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>출력)--&gt;</span><br><span class="line">&lt;c:forEach var=<span class="string">"test"</span> begin=<span class="string">"1"</span> end=<span class="string">"10"</span> step=<span class="string">"2"</span> &gt;</span><br><span class="line">     &lt;b&gt;$&#123;test &#125;&lt;/b&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>c:forTokens</code> - 구분자로 반복문</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--기본문법(변수를 <span class="string">','</span>로 구분하여 출력한다. )--&gt;</span><br><span class="line">&lt;c:forTokens var=<span class="string">"alphabet"</span> items=<span class="string">"a,b,c,d,e,f,g,h,i,j,k"</span> delims=<span class="string">","</span> varStatus=<span class="string">"idx"</span> &gt;</span><br><span class="line">     &lt;b&gt;$&#123;alphabet &#125;&lt;/b&gt;</span><br><span class="line">&lt;/c:forTokens&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>c:url, c:param</code>  - URL을 처리</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:url value=<span class="string">"index.jsp"</span>/&gt;</span><br><span class="line">&lt;!-- value의 속성값이 /로 시작하면 컨텍스트를 포함한다--&gt;</span><br><span class="line">&lt;!--Context가 Root이라면 /Root/index.jsp로 출력--&gt;</span><br><span class="line">&lt;c:url value=<span class="string">"/index.jsp"</span>/&gt;</span><br><span class="line">&lt;!--context 속성 : 다른 컨텍스트로 출력하고자할때 사용--&gt;</span><br><span class="line">&lt;!-- /newRoot/index.jsp로 출력--&gt;</span><br><span class="line">&lt;c:url value=<span class="string">"/index.jsp"</span> context=<span class="string">"/newRoot"</span>/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>c:import</code> - JSP파일을 인클루드한다.</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- partialView.jsp의 내용을 출력 --&gt;</span><br><span class="line">&lt;c:<span class="keyword">import</span> url=<span class="string">"partialView.jsp"</span>/&gt;</span><br><span class="line">&lt;!-- charEncoding 속성:   인코딩에 문제가 있을 시 사용 --&gt;</span><br><span class="line">&lt;c:<span class="keyword">import</span> url=<span class="string">"UserForm.jsp"</span> charEncoding=<span class="string">"UTF-8"</span>/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>c:redirect</code> - 리다이렉션</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 기본 문법 --&gt;</span><br><span class="line">&lt;c:redirect url=<span class="string">"http://kkams.net"</span>/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>c:catch</code> - 예외 발생시 처리</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 기본 문법 --&gt;</span><br><span class="line">&lt;c:<span class="keyword">catch</span> var=<span class="string">"err"</span>&gt;</span><br><span class="line">    &lt;%=<span class="number">10</span> / <span class="number">0</span>%&gt; &lt;!--<span class="number">0</span>으로 나누면 에러 발생--&gt;</span><br><span class="line">&lt;/c:catch&gt;</span><br><span class="line">&lt;!--에러 출력--&gt;</span><br><span class="line">&lt;c:out value=<span class="string">"$&#123;err &#125;"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>다양해보이지만, 상당히 빈약한 문법과 코드를 가지고 있는 것이 JSTL입니다. 자주 사용되기도 하고, 일단 표준이기 때문에 몰라서는 안되는 View 표현 방법입니다. 앞서 Controller에서 보내지는 Model의 값을 JSTL을 이용해서 표현하게 되는 것이 일반적입니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/book/list"</span>, method = RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">getBookList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Book&gt; books = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span> ; i &lt; <span class="number">10</span> ; i++) &#123;</span><br><span class="line">        String name = String.format(<span class="string">"책%d"</span>, i);</span><br><span class="line">        String author = String.format(<span class="string">"저자%d"</span>, i);</span><br><span class="line">        String status = <span class="string">"상태"</span>;</span><br><span class="line">        books.add(<span class="keyword">new</span> Book(name, author, status));</span><br><span class="line">    &#125;</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">    modelAndView.setViewName(<span class="string">"book/list"</span>);</span><br><span class="line">    modelAndView.addObject(<span class="string">"books"</span>, books);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"c"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span>%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"spring"</span> uri=<span class="string">"http://www.springframework.org/tags"</span>%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"form"</span> uri=<span class="string">"http://www.springframework.org/tags/form"</span>%&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">"fn"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/functions"</span>%&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">    &lt;link href=<span class="string">"/node_modules/bootstrap/dist/css/bootstrap.min.css"</span> rel=<span class="string">"stylesheet"</span> /&gt;</span><br><span class="line">    &lt;script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;jstl test code 입니다.&lt;/h2&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"example-form"</span>&gt;</span><br><span class="line">    &lt;h3&gt;c:forEach example code&lt;/h3&gt;</span><br><span class="line">    &lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">"table table-striped table-bordered table-hover"</span>&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;이름&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;상태&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;저자&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line"></span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">            &lt;c:forEach var=<span class="string">"book"</span> items=<span class="string">"$&#123;books&#125;"</span>&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"일반"</span> /&gt;</span><br><span class="line">                    &lt;c:choose&gt;</span><br><span class="line">                        &lt;c:when test=<span class="string">"$&#123;book.status eq 'NORMAL'&#125;"</span>&gt;</span><br><span class="line">                            &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"일반"</span> /&gt;</span><br><span class="line">                        &lt;/c:when&gt;</span><br><span class="line">                        &lt;c:when test=<span class="string">"$&#123;book.status eq 'RENTNOW'&#125;"</span>&gt;</span><br><span class="line">                            &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"대여중"</span> /&gt;</span><br><span class="line">                        &lt;/c:when&gt;</span><br><span class="line">                        &lt;c:otherwise&gt;</span><br><span class="line">                            &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"분실중"</span> /&gt;</span><br><span class="line">                        &lt;/c:otherwise&gt;</span><br><span class="line">                    &lt;/c:choose&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;status &#125;&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;book.author&#125;&lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &lt;/c:forEach&gt;</span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="JSTL-fmt를-이용한-데이터의-가공"><a href="#JSTL-fmt를-이용한-데이터의-가공" class="headerlink" title="JSTL fmt를 이용한 데이터의 가공"></a>JSTL fmt를 이용한 데이터의 가공</h3><p>java의 원 데이터를 html로 표시할 때, 우리는 자주 데이터의 모양을 바꿔야지 되는 일들이 발생됩니다. 특히 통화량과 날짜, 소숫점의 표시에서 가장 일반적이라고 할 수 있습니다. 자리수 단락에서 “,”를 추가한다던지, 소숫점 이하의 자리수를 어떻게 표시를 하는지에 대한 문제는 Controller와 같은 기술적인 issue와는 별개로 사용자들에게는 ‘모든 것’이 될 수 있는 문제입니다. 이런 일은 수치데이터를 직접 바꾸는 것이 아니라 수치의 표시를 어떻게 해줄 것인지에 대한 내용입니다. View에서 이런 일들을 해주는 것이 가장 좋습니다.</p>
<p>이 부분에 대해서는 issue가 있습니다. View에서 특정 데이터를 빨간색으로 보여야지 되는 action에 대한 처리를 무엇으로 보느냐에 대한 논쟁입니다. <strong>이것은 보는 방법을 바꾸는 일</strong>이기 때문에 View에서 봐야지 된다는 의견과 보는 방법이 아닌 이것 역시 Business Logic으로 보는 견해도 있습니다. BL이기 때문에 Server Code에서 구동이 되고 테스트가 가능한 방법으로 만들어야지 된다는 것이지요. 가장 좋은 위치는 Controller 영역으로 이야기하고 있습니다. 보여지는 Model을 변경하는 것이기 때문에 가장 좋은 Layer이니까요. 개인적인 의견으로는 View에 대한 영역은 모두 View에 넘기는 것이 좋지 않나. 라는 생각입니다. 저는 개인적으로는 전자의 의견에 좀더 한표를 주고 있는 편입니다. 이 부분에 대해서는 개발자들의 취향과 그 프로젝트의 PM에 따라서 많이 바뀌게 될 내용이라고 생각됩니다.</p>
<p>지금 소개하는 JSTL fmt의 경우에는 View Layer, 즉 JSP에서 보이는 방법을 바꿔주는 방법입니다.</p>
<p>선언 방법은 다음과 같습니다.</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"fmt"</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/fmt"</span>%&gt;</span><br></pre></td></tr></table></figure>
<p>선언된 데이터는 다음과 같이 사용이 가능합니다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"example-form"</span>&gt;</span><br><span class="line">    &lt;fieldset&gt;</span><br><span class="line">        &lt;legend&gt;FMT examples - Date&lt;/legend&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;&lt;fmt:formatDate value="$&#123;date&#125;" type="DATE" pattern="yyyy/MM/dd" /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;fmt:formatDate value="$&#123;date&#125;" type="DATE" pattern="yyyy년 M월 dd일" /&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/fieldset&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &lt;fieldset&gt;</span><br><span class="line">        &lt;legend&gt;FMT example - Number&lt;/legend&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li&gt;orginal : $&#123;number&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;fmt:formatNumber value="$&#123;number&#125;" groupingUsed="true" currencySymbol=","/&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;fmt:formatNumber value="$&#123;number&#125;" minFractionDigits="5"/&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;fmt:formatNumber value="$&#123;number&#125;" type="CURRENCY"/&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;fmt:formatNumber value="234.3" pattern="△#,##0.00; ▼#,##0.00" /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;fmt:formatNumber value="-1234.56" pattern="△#,##0.00; ▼#,##0.00" /&gt;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&lt;fmt:formatNumber value="0.99" type="percent"/&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/fieldset&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><img src="/images/15/01.png" alt=""></p>
<h3 id="Freemarker"><a href="#Freemarker" class="headerlink" title="Freemarker"></a>Freemarker</h3><p>Freemarker는 <code>JSP Tag</code>보다 나은 가독성과 속도를 목적으로 하고 있는 ViewEngine입니다. 다음은 <code>Freemarker</code>로 만든 <code>loop</code>문입니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list books as book&gt;</span><br><span class="line">  &lt;tr&gt;</span><br><span class="line">    &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;</span><br><span class="line">    &lt;#if book.status == &quot;NORMAL&quot;&gt;</span><br><span class="line">        &lt;td&gt;일반&lt;/td&gt;</span><br><span class="line">    &lt;#elseif book.status == &quot;RENTNOW&quot;&gt;</span><br><span class="line">        &lt;td&gt;대여중&lt;/td&gt;</span><br><span class="line">    &lt;#else&gt;</span><br><span class="line">        &lt;td&gt;분실&lt;/td&gt;</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">    &lt;td&gt;$&#123;book.author&#125;&lt;/td&gt;</span><br><span class="line">  &lt;/tr&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>
<p>기존 <code>jsp</code>에서의 문과 비교해보면 가독성이 더 높은 것을 알 수 있습니다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach var=<span class="string">"book"</span> items=<span class="string">"$&#123;books&#125;"</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;</span><br><span class="line">        &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"일반"</span> /&gt;</span><br><span class="line">        &lt;c:choose&gt;</span><br><span class="line">            &lt;c:when test=<span class="string">"$&#123;book.status eq 'NORMAL'&#125;"</span>&gt;</span><br><span class="line">                &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"일반"</span> /&gt;</span><br><span class="line">            &lt;/c:when&gt;</span><br><span class="line">            &lt;c:when test=<span class="string">"$&#123;book.status eq 'RENTNOW'&#125;"</span>&gt;</span><br><span class="line">                &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"대여중"</span> /&gt;</span><br><span class="line">            &lt;/c:when&gt;</span><br><span class="line">            &lt;c:otherwise&gt;</span><br><span class="line">                &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"분실중"</span> /&gt;</span><br><span class="line">            &lt;/c:otherwise&gt;</span><br><span class="line">        &lt;/c:choose&gt;</span><br><span class="line">        &lt;td&gt;$&#123;status&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.author&#125;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<p><code>if</code>, <code>foreach</code>와 같은 제어문이 더 좋습니다. 그리고 기본적으로 <code>HTML</code>과 거의 동일한 문법을 가지고 있기 때문에 좀 더 사용하기 편한 면도 있습니다.</p>
<p><code>freemarker</code>를 사용하기 위한 <code>dependency</code>와 <code>@Configuration</code>은 다음과 같습니다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">group:</span> <span class="string">'org.freemarker'</span>, <span class="string">name:</span> <span class="string">'freemarker'</span>, <span class="string">version:</span> <span class="string">'2.3.23'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span>(name = <span class="string">"freemarkerConfig"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> FreeMarkerConfigurer <span class="title">freemarkerConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FreeMarkerConfigurer freemarkerConfigurer = <span class="keyword">new</span> FreeMarkerConfigurer();</span><br><span class="line">    freemarkerConfigurer.setTemplateLoaderPath(<span class="string">"/WEB-INF/fmt/"</span>);</span><br><span class="line">    freemarkerConfigurer.setDefaultEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">    freemarkerConfigurer.setPreferFileSystemAccess(<span class="keyword">false</span>);</span><br><span class="line">    <span class="keyword">return</span> freemarkerConfigurer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span>(name = <span class="string">"freeMarkerViewResolver"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> FreeMarkerViewResolver <span class="title">freemarkerViewResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    FreeMarkerViewResolver viewResolver = <span class="keyword">new</span> FreeMarkerViewResolver();</span><br><span class="line">    viewResolver.setExposeSpringMacroHelpers(<span class="keyword">true</span>);</span><br><span class="line">    viewResolver.setExposeRequestAttributes(<span class="keyword">true</span>);</span><br><span class="line">    viewResolver.setContentType(<span class="string">"text/html; charset=UTF-8"</span>);</span><br><span class="line">    viewResolver.setCache(<span class="keyword">false</span>);</span><br><span class="line">    viewResolver.setSuffix(<span class="string">".ftl"</span>);</span><br><span class="line">    <span class="keyword">return</span> viewResolver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="tiles"><a href="#tiles" class="headerlink" title="tiles"></a>tiles</h3><p>Tiles는 기본적으로 JSTL을 이용하지만, JSTL에서 중복되는 html code를 최소화하기 위해서 만들어진 Template Engine입니다. Tile는 기본적인 Html View 가 Composite View Pattern으로 동작할 때, 중복되는 코드들을 공통 요소로 뽑아서 이용가능합니다. 다음은 Tile에 대한 기본 개념의 정의입니다.</p>
<p><img src="/images/15/02.png" alt=""></p>
<p>일반적인 Html Page의 기본 구조입니다. 이 구조에서 페이지가 바뀌게 된다면 Body부분의 Content는 계속해서 바뀌게 되지만, Menu, Header, Footer들은 크게 바뀌지 않는 것이 일반적입니다. 따라서, 각 부분을 재사용할 수 있다면 코드의 양은 매우 줄어들고, 유지보수에 용의함을 알 수 있습니다.</p>
<p>tiles역시 tag를 제공하고 있으며, <code>xml</code>을 통해서 view를 정의합니다.</p>
<p>먼저, 다음과 같이 layout을 만들어줍니다. <code>layout</code>은 <code>insertAttribute</code>를 갖고, 이는 각 <code>Component</code>를 의미합니다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"tiles"</span> uri=<span class="string">"http://tiles.apache.org/tags-tiles"</span>%&gt;</span><br><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">  &lt;title&gt;&lt;tiles:insertAttribute name="title"/&gt;&lt;/title&gt;</span><br><span class="line">  &lt;link href=<span class="string">"/node_modules/bootstrap/dist/css/bootstrap.min.css"</span> rel=<span class="string">"stylesheet"</span> /&gt;</span><br><span class="line">  &lt;script src="/node_modules/jquery/dist/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;tiles:insertAttribute name=<span class="string">"content"</span>/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>기본적인 content의 attribute를 지정하고, 그 attribute에 원하는 값을 넣어주는 것이 가능합니다. attribute는 String 문자열 또는 jsp 파일이 될 수 있습니다.  이러한 attribute와 view name을 설정하기 위해서 tiles는 설정 xml을 가지게 되는데, 이 xml은 다음과 같이 구성될 수 있습니다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE tiles-definitions PUBLIC</span></span><br><span class="line"><span class="meta">       "-//Apache Software Foundation//DTD Tiles Configuration 3.0//EN"</span></span><br><span class="line"><span class="meta">       "http://tiles.apache.org/dtds/tiles-config_3_0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tiles-definitions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">definition</span> <span class="attr">name</span>=<span class="string">"main-layout"</span> <span class="attr">template</span>=<span class="string">"/WEB-INF/tiles/layouts/main-layout.jsp"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">put-attribute</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">put-attribute</span> <span class="attr">name</span>=<span class="string">"content"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">definition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">definition</span> <span class="attr">name</span>=<span class="string">"book/list"</span> <span class="attr">extends</span>=<span class="string">"main-layout"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">put-attribute</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">value</span>=<span class="string">"BOOK LIST"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">put-attribute</span> <span class="attr">name</span>=<span class="string">"content"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/tiles/book/list.jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">definition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">definition</span> <span class="attr">name</span>=<span class="string">"book/add"</span> <span class="attr">extends</span>=<span class="string">"main-layout"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">put-attribute</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">value</span>=<span class="string">"Add BOOK"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">put-attribute</span> <span class="attr">name</span>=<span class="string">"content"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/tiles/book/add.jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">definition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tiles-definitions</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>여기서 각각의 definition name은 ModelAndView의 view name으로 이용됩니다. extends로 선언된 View를 Template로 이용하고, 각각의 View의 조각(tile)을 붙이는 형식으로 사용할 수 있습니다.</p>
<p>여기에서 사용될 <code>book/list.jsp</code> 내용은 다음과 같이 구성될 수 있습니다.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;table <span class="class"><span class="keyword">class</span></span>=<span class="string">"table table-striped table-bordered table-hover"</span>&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;이름&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;상태&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;저자&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line"></span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">            &lt;c:forEach var=<span class="string">"book"</span> items=<span class="string">"$&#123;books&#125;"</span>&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"일반"</span> /&gt;</span><br><span class="line">                    &lt;c:choose&gt;</span><br><span class="line">                        &lt;c:when test=<span class="string">"$&#123;book.status eq 'NORMAL'&#125;"</span>&gt;</span><br><span class="line">                            &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"일반"</span> /&gt;</span><br><span class="line">                        &lt;/c:when&gt;</span><br><span class="line">                        &lt;c:when test=<span class="string">"$&#123;book.status eq 'RENTNOW'&#125;"</span>&gt;</span><br><span class="line">                            &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"대여중"</span> /&gt;</span><br><span class="line">                        &lt;/c:when&gt;</span><br><span class="line">                        &lt;c:otherwise&gt;</span><br><span class="line">                            &lt;c:set var=<span class="string">"status"</span> value=<span class="string">"분실중"</span> /&gt;</span><br><span class="line">                        &lt;/c:otherwise&gt;</span><br><span class="line">                    &lt;/c:choose&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;status &#125;&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;book.author&#125;&lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &lt;/c:forEach&gt;</span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>단순한 HTML의 경우에는 차이가 크지 않지만, HTML이 커질수록 관리면에서 매우큰 장점을 가지고 있습니다.<br><code>tiles</code>를 사용하기 위한 <code>dependency</code>와 <code>@Configuration</code>은 다음과 같습니다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">group:</span> <span class="string">'org.apache.tiles'</span>, <span class="string">name:</span> <span class="string">'tiles-jsp'</span>, <span class="string">version:</span> <span class="string">'3.0.8'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TilesConfigurer <span class="title">tilesConfigurer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    TilesConfigurer tilesConfigurer = <span class="keyword">new</span> TilesConfigurer();</span><br><span class="line">    tilesConfigurer.setDefinitions(<span class="string">"/WEB-INF/tiles-configs.xml"</span>);</span><br><span class="line">    <span class="keyword">return</span> tilesConfigurer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TilesViewResolver <span class="title">tilesViewResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    TilesViewResolver tilesViewResolver = <span class="keyword">new</span> TilesViewResolver();</span><br><span class="line">    tilesViewResolver.setOrder(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> tilesViewResolver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="또다른-View-Template-Engine-들"><a href="#또다른-View-Template-Engine-들" class="headerlink" title="또다른 View Template Engine 들.."></a>또다른 View Template Engine 들..</h3><p><code>Sitemesh</code>, <code>thymeleaf</code>, <code>Velocity</code>, <code>Pebble</code> 등의 다양한 <code>View Template Engine</code>이 있습니다.<br>프로젝트를 시작할 때, 어떤 것이 가장 좋은지 비교해보는 노력이 필요합니다.</p>
<p>예전에는 <code>View Template Engine</code>간의 속도차가 분명히 존재했습니다. 그러나, 지금 <code>java</code> 버젼이 높아진 상태에서는 <code>View Template Engine</code>의 속도는 거의 차이가 없습니다. 그러나 <code>java 6</code>이전 버젼의 경우에는 몇몇 <code>View Template</code>간의 속도차가 분명히 존재합니다.</p>
<p>개발자들의 숙련도와 가장 쉬운것이 뭘지를 고민해서 처리하는 것이 좋습니다.</p>
<h2 id="View의-표현법-none-HTML"><a href="#View의-표현법-none-HTML" class="headerlink" title="View의 표현법 - none HTML"></a>View의 표현법 - none HTML</h2><p>우리가 일반적으로 보는 브라우져 이외의 방법들로 보여지는 방법입니다. 그럼 다른 타입의 View는 어떤 것들이 있을까요?<br>먼저, File(excel, pdf) download가 있습니다. 그리고, 최근에는 json 형태로 객체를 표현하여 <code>API</code>를 제공하는 것 역시 <code>View</code>를 통해서 진행됩니다.</p>
<h3 id="Excel"><a href="#Excel" class="headerlink" title="Excel"></a>Excel</h3><p><code>Spring</code>에서는 Excel File을 위해 <code>Apache POI</code>를 이용합니다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">group:</span> <span class="string">'org.apache.poi'</span>, <span class="string">name:</span> <span class="string">'poi'</span>, <span class="string">version:</span> <span class="string">'3.17'</span></span><br><span class="line">compile <span class="string">group:</span> <span class="string">'org.apache.poi'</span>, <span class="string">name:</span> <span class="string">'poi-ooxml'</span>, <span class="string">version:</span> <span class="string">'3.17'</span></span><br></pre></td></tr></table></figure>
<p>Excel 파일을 생성하기 위해서, Spring에서는 <code>AbstractXlsxView</code>를 제공합니다. 선언은 다음과 같이 구성되어 있습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractXlsxView</span> <span class="keyword">extends</span> <span class="title">AbstractXlsView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractXlsxView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        setContentType(<span class="string">"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Workbook <span class="title">createWorkbook</span><span class="params">(Map&lt;String, Object&gt; model, HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> XSSFWorkbook();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이제 이 class를 상속받아 다음과 같이 구성이 가능합니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookListExcelView</span> <span class="keyword">extends</span> <span class="title">AbstractXlsxView</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">buildExcelDocument</span><span class="params">(Map&lt;String, Object&gt; model, Workbook workbook,</span></span></span><br><span class="line"><span class="function"><span class="params">                                      HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        SimpleDateFormat fileFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMdd"</span>);</span><br><span class="line">        String fileName = <span class="string">"책리스트"</span> + <span class="string">"-"</span> + fileFormat.format(<span class="keyword">new</span> Date()) + <span class="string">".xlsx"</span>;</span><br><span class="line">        response.setHeader(<span class="string">"Content-Disposition"</span>, String.format(<span class="string">"attachment; filename=\"%s\""</span>, fileName));</span><br><span class="line">        Sheet sheet = workbook.createSheet(<span class="string">"책목록"</span>);</span><br><span class="line"></span><br><span class="line">        Row header = sheet.createRow(<span class="number">0</span>);</span><br><span class="line">        header.createCell(<span class="number">0</span>).setCellValue(<span class="string">"이름"</span>);</span><br><span class="line">        header.createCell(<span class="number">1</span>).setCellValue(<span class="string">"저자"</span>);</span><br><span class="line">        header.createCell(<span class="number">2</span>).setCellValue(<span class="string">"상태"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">        List&lt;Book&gt; books = (List&lt;Book&gt;) model.get(<span class="string">"books"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> row = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (Book book : books) &#123;</span><br><span class="line">            Row rowCell = sheet.createRow(row);</span><br><span class="line">            rowCell.createCell(<span class="number">0</span>).setCellValue(book.getName());</span><br><span class="line">            rowCell.createCell(<span class="number">1</span>).setCellValue(book.getAuthor());</span><br><span class="line">            rowCell.createCell(<span class="number">2</span>).setCellValue(book.getStatus());</span><br><span class="line">            row++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이제 구성된 <code>View</code>를 <code>Controller</code>에서 다음과 같이 사용할 수 있습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BookListExcelView bookListExcelView;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BookController</span><span class="params">(BookListExcelView bookListExcelView)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bookListExcelView = bookListExcelView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(value = <span class="string">"/book/excel"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">getBookExcel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Book&gt; books = getBooks();</span><br><span class="line">        ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line"></span><br><span class="line">        modelAndView.setView(<span class="keyword">this</span>.bookListExcelView);</span><br><span class="line">        modelAndView.addObject(<span class="string">"books"</span>, books);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>이에 대한 테스트 코드는 다음과 같습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getBookExcel</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    MvcResult mvcResult = mockMvc.perform(get(<span class="string">"/book/excel"</span>))</span><br><span class="line">        .andExpect(status().isOk())</span><br><span class="line">        .andExpect(model().attributeExists(<span class="string">"books"</span>))</span><br><span class="line">        .andDo(MockMvcResultHandlers.print())</span><br><span class="line">        .andReturn();</span><br><span class="line">    assertThat(mvcResult.getModelAndView().getView()).isNotNull().isInstanceOf(BookListExcelView.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="PDF-using-iText-2-1-7"><a href="#PDF-using-iText-2-1-7" class="headerlink" title="PDF (using iText 2.1.7)"></a>PDF (using iText 2.1.7)</h3><p><code>Spring</code>에서 PDF는 미묘합니다. java에서 가장 많이 사용되고 있는 <code>iText</code>는 <code>2.1.7</code>까지는 <code>MPL</code>정책을 가지고 있으나, 다음 버젼부터는 <code>AGPL</code>을 따르고 있습니다. <code>AGPL</code>은 매우 강력한 <code>License</code> 정책입니다. 이 정책은 이 library가 사용된 product의 전체 코드를 모두 <code>Open Source</code>로 공개해야지 됩니다. 따라서, 일반적인 Solution이나 Service에서 사용할 수 없습니다. 내부내에서 사용되는 Tool 정도로만 사용 가능합니다.</p>
<p>dependency는 다음과 같습니다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">group:</span> <span class="string">'com.lowagie'</span>, <span class="string">name:</span> <span class="string">'itext'</span>, <span class="string">version:</span> <span class="string">'2.1.7'</span></span><br></pre></td></tr></table></figure>
<p>그리고, Spring에서 제공하는 <code>AbstractPdfView</code>를 상속받아 다음과 같이 구성하면 됩니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BookListITextPdfView</span> <span class="keyword">extends</span> <span class="title">AbstractPdfView</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">buildPdfDocument</span><span class="params">(Map&lt;String, Object&gt; model, Document document, PdfWriter writer,</span></span></span><br><span class="line"><span class="function"><span class="params">                                    HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        setFileNameToResponse(request, response, <span class="string">"bookList.pdf"</span>);</span><br><span class="line">        Chapter chapter = <span class="keyword">new</span> Chapter(<span class="keyword">new</span> Paragraph(<span class="string">"this is english"</span>), <span class="number">1</span>);</span><br><span class="line">        chapter.add(<span class="keyword">new</span> Paragraph(<span class="string">"이건 메세지입니다."</span>));</span><br><span class="line">        document.add(chapter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setFileNameToResponse</span><span class="params">(HttpServletRequest request, HttpServletResponse response, String fileName)</span> </span>&#123;</span><br><span class="line">        String userAgent = request.getHeader(<span class="string">"User-Agent"</span>);</span><br><span class="line">        <span class="keyword">if</span> (userAgent != <span class="keyword">null</span> &amp;&amp; userAgent.contains(<span class="string">"MSIE 5.5"</span>)) &#123;</span><br><span class="line">            response.setContentType(<span class="string">"doesn/matter"</span>);</span><br><span class="line">            response.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"filename=\""</span> + fileName + <span class="string">"\""</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            response.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment; filename=\""</span> + fileName + <span class="string">"\""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이렇게 구성된 <code>View</code>를 이용한 <code>Controller</code> 코드는 다음과 같습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(value = <span class="string">"/book/itext2/pdf"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">getBookPdf</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Book&gt; books = getBooks();</span><br><span class="line">    ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line"></span><br><span class="line">    modelAndView.setView(<span class="keyword">this</span>.bookListPdfView);</span><br><span class="line">    modelAndView.addObject(<span class="string">"books"</span>, books);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위와 같이 구성하고 테스트 코드는 다음과 같이 구성될 수 있습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getBookItext2Pdf</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    MvcResult mvcResult = mockMvc.perform(get(<span class="string">"/book/itext2/pdf"</span>))</span><br><span class="line">        .andExpect(status().isOk())</span><br><span class="line">        .andExpect(model().attributeExists(<span class="string">"books"</span>))</span><br><span class="line">        .andDo(MockMvcResultHandlers.print())</span><br><span class="line">        .andReturn();</span><br><span class="line">    assertThat(mvcResult.getModelAndView().getView()).isNotNull().isInstanceOf(BookListITextPdfView.class);</span><br><span class="line">    Files.write(Paths.get(<span class="string">"sample.pdf"</span>), mvcResult.getResponse().getContentAsByteArray());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>마지막 라인의 경우, response를 파일로 저장시켜 완성된 pdf 파일을 확인할 수 있습니다. 그런데, 위 결과를 보시면 한글 메세지가 표시되지 않는 것을 확인할 수 있습니다. <code>iText2</code>의 경우, 한글 font가 정상적으로 들어가 있지 않습니다. 한글 메세지를 보기위해서는 다음과 같은 절차가 더 필요합니다.</p>
<p>먼저, 다음 url에서 <code>iTextAsian.jar</code>를 다운 받습니다.</p>
<p><code>http://sourceforge.net/project/showfiles.php?group_id=15255</code></p>
<p>다운받은 <code>jar</code>를 <code>mavenLocal</code> 또는 <code>nexus</code>와 같은 <code>repository storage</code>에 넣어줍니다.<br><code>localMaven()</code>의 경우 다음과 같이 넣어줄 수 있습니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn install:install-file -DgroupId=com.lowagie -DartifactId=itextasian -Dversion=1.0 -Dpackaging=jar -Dfile=/Users/secucen/Downloads/iTextAsian.jar</span><br></pre></td></tr></table></figure>
<p>그리고 <code>dependency</code>를 다음과 같이 수정하면 <code>localMaven</code>에서 위 jar를 참고해서 사용할 수 있습니다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">repositories &#123;</span><br><span class="line">    mavenLocal()</span><br><span class="line">    jcenter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    .....</span><br><span class="line">    compile <span class="string">'com.lowagie:itextasian:1.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이제 <code>Font</code>를 사용하도록 코드를 수정합니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">buildPdfDocument</span><span class="params">(Map&lt;String, Object&gt; model, Document document, PdfWriter writer,</span></span></span><br><span class="line"><span class="function"><span class="params">                                HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    setFileNameToResponse(request, response, <span class="string">"bookList.pdf"</span>);</span><br><span class="line">    BaseFont objBaseFont = BaseFont.createFont(<span class="string">"HYGoThic-Medium"</span>, <span class="string">"UniKS-UCS2-H"</span>, <span class="keyword">false</span>);</span><br><span class="line">    Font objFont = <span class="keyword">new</span> Font(objBaseFont, <span class="number">12</span>);</span><br><span class="line">    Chapter chapter = <span class="keyword">new</span> Chapter(<span class="keyword">new</span> Paragraph(<span class="string">"this is english"</span>), <span class="number">1</span>);</span><br><span class="line">    chapter.add(<span class="keyword">new</span> Paragraph(<span class="string">"이건 메세지입니다."</span>, objFont));</span><br><span class="line">    document.add(chapter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이제 한글을 정상적으로 표시할 수 있습니다. 이 때 폰트는 <code>iTextAsian</code>에서 제공되는 font만을 사용하게 됩니다.</p>
<p>만약 외부 한글 font를 이용하기 위해서는 다른 방법을 사용해야지 됩니다. itext는 거의 대부분의 ttf 파일을 지원합니다. ttf를 class path에 넣어주는 것이 필요합니다. 이때, ttf파일을 class path에 넣어주는 것이 중요합니다. 이는 font embedded가 되는 것으로 생각하시면 되고, 이는 한참 문제되고 있는 font 저작권문제와 연관이 깊습니다. 이렇게 배포하게 되는 경우에는 font의 저작권을 신경써주시는 것이 좋습니다. 외부 ttf 파일을 이용해서 사용하는 경우, 다음과 같은 코드를 이용하면 됩니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> BaseFont <span class="title">getIdentityFont</span><span class="params">(String path)</span> <span class="keyword">throws</span> DocumentException, IOException </span>&#123;</span><br><span class="line">    String fontPath = FontUtils.class.getClassLoader().getResource(path).toExternalForm();</span><br><span class="line">    <span class="keyword">if</span> (fontPath == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    BaseFont baseFont = BaseFont.createFont(fontPath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);</span><br><span class="line">    <span class="keyword">return</span> baseFont;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">buildPdfDocument</span><span class="params">(Map&lt;String, Object&gt; model, Document document, PdfWriter writer,</span></span></span><br><span class="line"><span class="function"><span class="params">                                HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    setFileNameToResponse(request, response, <span class="string">"bookList.pdf"</span>);</span><br><span class="line">    BaseFont objBaseFont = getIdentityFont(<span class="string">"nanumGothic.ttf"</span>);</span><br><span class="line">    <span class="keyword">if</span> (objBaseFont == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"font 파일이 존재하지 않습니다."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Font objFont = <span class="keyword">new</span> Font(objBaseFont, <span class="number">12</span>);</span><br><span class="line">    Chapter chapter = <span class="keyword">new</span> Chapter(<span class="keyword">new</span> Paragraph(<span class="string">"this is english"</span>), <span class="number">1</span>);</span><br><span class="line">    chapter.add(<span class="keyword">new</span> Paragraph(<span class="string">"이건 메세지입니다."</span>, objFont));</span><br><span class="line">    document.add(chapter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="PDF-using-iText-5-higher"><a href="#PDF-using-iText-5-higher" class="headerlink" title="PDF (using iText 5 higher)"></a>PDF (using iText 5 higher)</h3><p><code>iText</code> 5 부터는 <code>APGA</code>라는 매우 강력한 라이센스 정책을 가지고 있습니다. 이 정책의 경우에는 만든 제품의 코드를 공개하지 않으면 안됩니다. 이 라이센스정책의 경우, 솔루션에서 사용할 수 없습니다. 그런 이유인지는 모르겠지만, <code>Spring</code>에서 기본적으로 지원하고 있지는 않습니다. 그렇지만, 우리는 기존 <code>AbstractPdfView</code>를 기반으로 해서 새로운 <code>AbstractView</code>를 만들어낼 수 있습니다. 다음과 같이 구성해보도록 하겠습니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractIText5PdfView</span> <span class="keyword">extends</span> <span class="title">AbstractView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractIText5PdfView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        setContentType(<span class="string">"application/pdf"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">generatesDownloadContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">renderMergedOutputModel</span><span class="params">(Map&lt;String, Object&gt; model, HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                                                 HttpServletResponse response)</span> <span class="keyword">throws</span> Exception  </span>&#123;</span><br><span class="line">        ByteArrayOutputStream baos = createTemporaryOutputStream();</span><br><span class="line"></span><br><span class="line">        Document document = <span class="keyword">new</span> Document(PageSize.A4.rotate(), <span class="number">36</span>, <span class="number">36</span>, <span class="number">54</span>, <span class="number">36</span>);</span><br><span class="line">        PdfWriter writer = PdfWriter.getInstance(document, baos);</span><br><span class="line">        prepareWriter(model, writer, request);</span><br><span class="line">        buildPdfMetadata(model, document, request);</span><br><span class="line"></span><br><span class="line">        document.open();</span><br><span class="line">        buildPdfDocument(model, document, writer, request, response);</span><br><span class="line">        document.close();</span><br><span class="line"></span><br><span class="line">         <span class="comment">// make browser to ask for download/display</span></span><br><span class="line">        response.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment"</span>);</span><br><span class="line">        writeToResponse(response, baos);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">prepareWriter</span><span class="params">(Map&lt;String, Object&gt; model, PdfWriter writer,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 HttpServletRequest request)</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">        writer.setViewerPreferences(getViewerPreferences());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">int</span> <span class="title">getViewerPreferences</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> PdfWriter.ALLOW_PRINTING | PdfWriter.PageLayoutSinglePage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildPdfMetadata</span><span class="params">(Map&lt;String, Object&gt; model, Document document, HttpServletRequest request)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">buildPdfDocument</span><span class="params">(Map&lt;String, Object&gt; model, Document document, PdfWriter writer,</span></span></span><br><span class="line"><span class="function"><span class="params">                                             HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p>JSON (JavaScript Object Notation)은 경량의 <code>DATA-교환형식</code>이다. 이 형식은 사람이 읽고 쓰기에 용이하며, 기계가 분석하고 생성함에도 용이합니다. JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999의 일부에 토대를 두고 있습니다. JSON은 완벽하게 언어로 부터 독립적이지만 C-family 언어 - C, C++, C#, Java, JavaScript, Perl, Python 그외 다수 - 의 프로그래머들에게 친숙한 관습을 사용하는 텍스트 형식을 가지고 있습니다.</p>
<p>JSON은 두개의 구조를 기본으로 가지고 있습니다.</p>
<ul>
<li>name/value 형태의 쌍으로 collection 타입. 다양한 언어들에서, 이는 object, record, struct(구조체), dictionary, hash table, 키가 있는 list, 또는 연상배열로서 구현되었습니다.</li>
<li>값들의 순서화된 리스트. 대부분의 언어들에서, 이는 array, vector, list, 또는 sequence로서 구현되었습니다.</li>
</ul>
<p><code>DATA-교환형식</code>으로서의 <code>JSON</code>은 오늘날의 개발에서 매우 중요한 역활을 가지고 있습니다. 단순히 <code>frontend-backend</code>간의 데이터 교환뿐이 아니라 mongoDb, mySQL의 경우 기본 데이터 형식으로 <code>JSON</code>을 가지고 있습니다.</p>
<p>Spring에서는 JSON을 View로 사용하기 위해서는 다음과 같은 dependency가 필요합니다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">group:</span> <span class="string">'com.fasterxml.jackson.core'</span>, <span class="string">name:</span> <span class="string">'jackson-databind'</span>, <span class="string">version:</span> <span class="string">'2.9.4'</span></span><br></pre></td></tr></table></figure>
<p>Spring에서는 <code>jackson</code>이 포함되어 있고, method에 <code>@ResponseBody</code>가 지정되어 있는 경우에 <code>JSON</code>으로 변경된 return값을 보내줍니다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(value = <span class="string">"/book/json"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">getBookJson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Book&gt; books = getBooks();</span><br><span class="line">    <span class="keyword">return</span> books;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getBookJson</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    MvcResult mvcResult = mockMvc.perform(get(<span class="string">"/book/json"</span>))</span><br><span class="line">        .andDo(print())</span><br><span class="line">        .andExpect(status().isOk())</span><br><span class="line">        .andReturn();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MockHttpServletResponse:</span><br><span class="line">           Status = 200</span><br><span class="line">    Error message = null</span><br><span class="line">          Headers = &#123;Content-Type=[application/json;charset=UTF-8]&#125;</span><br><span class="line">     Content <span class="built_in">type</span> = application/json;charset=UTF-8</span><br><span class="line">             Body = [&#123;<span class="string">"name"</span>:<span class="string">"책0"</span>,<span class="string">"author"</span>:<span class="string">"저자0"</span>,<span class="string">"status"</span>:<span class="string">"NORMAL"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책1"</span>,<span class="string">"author"</span>:<span class="string">"저자1"</span>,<span class="string">"status"</span>:<span class="string">"NORMAL"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책2"</span>,<span class="string">"author"</span>:<span class="string">"저자2"</span>,<span class="string">"status"</span>:<span class="string">"NORMAL"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책3"</span>,<span class="string">"author"</span>:<span class="string">"저자3"</span>,<span class="string">"status"</span>:<span class="string">"NORMAL"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책4"</span>,<span class="string">"author"</span>:<span class="string">"저자4"</span>,<span class="string">"status"</span>:<span class="string">"NORMAL"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책5"</span>,<span class="string">"author"</span>:<span class="string">"저자5"</span>,<span class="string">"status"</span>:<span class="string">"NORMAL"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책6"</span>,<span class="string">"author"</span>:<span class="string">"저자6"</span>,<span class="string">"status"</span>:<span class="string">"RENTNOW"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책7"</span>,<span class="string">"author"</span>:<span class="string">"저자7"</span>,<span class="string">"status"</span>:<span class="string">"RENTNOW"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책8"</span>,<span class="string">"author"</span>:<span class="string">"저자8"</span>,<span class="string">"status"</span>:<span class="string">"NORMAL"</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"책9"</span>,<span class="string">"author"</span>:<span class="string">"저자9"</span>,<span class="string">"status"</span>:<span class="string">"NORMAL"</span>&#125;]</span><br><span class="line">    Forwarded URL = null</span><br><span class="line">   Redirected URL = null</span><br><span class="line">          Cookies = []</span><br></pre></td></tr></table></figure>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Spring은 다양한 View를 제공합니다. 크게 두가지 타입으로 나눈다면 <code>HTML형태로 보여지는 View</code>와 <code>특별한 형태로 변환되는 View</code>로 볼 수 있습니다.<br><code>HTML형태로 보여지는 View</code>는 다양한 View Engine을 이용할 수 있습니다. View Engine 종류로는 <code>tiles</code>, <code>velocity</code>, <code>freemarker</code>를 주로 사용합니다. 여담으로 회사내부에서는 <code>sitemash</code>를 사용하고 있습니다.<br><code>특별한 형태로 변환되는 View</code>는 매우 다양한 형태로 데이터를 표현하는 방식입니다. pdf, excel, json 등 다양한 데이터 형태를 제공하고 있습니다.</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/spring-view-controller-pdf-json/">spring, view, controller, pdf, json</a>
    </span>
    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2018 ykyoon
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>